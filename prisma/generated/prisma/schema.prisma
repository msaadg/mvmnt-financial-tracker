generator client {
  provider = "prisma-client-js"
  output   = "./generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model PowerUsers {
  id       Int    @id @default(autoincrement())
  username String @unique
  role     String
  email    String @unique
}

model Referrals {
  referralId Int        @id @default(autoincrement())
  name       String
  donations  Donation[]
}

model Collectors {
  collectorId Int        @id @default(autoincrement())
  name        String
  donations   Donation[]
  payments    Payment[]
}

// Vendors table
model Vendors {
  vendorName String     @id
  expenses   Expenses[]
  payments   Payment[]
}

model Donation {
  transacId     Int        @id @default(autoincrement())
  date          DateTime
  amount        Int
  donorName     String
  referralId    Int
  collectorId   Int
  type          String
  status        String
  notes         String?
  paymentMethod String
  collector     Collectors @relation(fields: [collectorId], references: [collectorId], onDelete: Cascade)
  referral      Referrals  @relation(fields: [referralId], references: [referralId], onDelete: Cascade)
}

// Expenses table
model Expenses {
  transacId   Int      @id @default(autoincrement())
  date        DateTime
  amount      Int
  vendorName  String
  project     String
  description String?
  status      String

  vendor Vendors? @relation(fields: [vendorName], references: [vendorName], onDelete: Cascade)
}

// Payment table
model Payment {
  paymentId     Int      @id @default(autoincrement())
  vendorName    String
  collectorId   Int
  type          String
  amount        Int
  date          DateTime
  paymentMethod String
  status        String   @default("Pending")

  collector Collectors? @relation(fields: [collectorId], references: [collectorId], onDelete: Cascade)
  vendor    Vendors?    @relation(fields: [vendorName], references: [vendorName], onDelete: Cascade)
}
